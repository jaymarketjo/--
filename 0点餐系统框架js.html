<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>点餐系统</title>
</head>
<body>
    <h1>欢迎来到点餐系统</h1>
    
    <h2>主菜</h2>
    <div class="menu-item" id="mainDishMenu">
        <button onclick="addMenuItem('mainDishMenu', 'mainDish')">增加主菜选项</button>
    </div>
    
    <h2>配菜</h2>
    <div class="menu-item" id="sideDishMenu">
        <button onclick="addMenuItem('sideDishMenu', 'sideDish')">增加配菜选项</button>
    </div>
    
    <h2>饮料</h2>
    <div class="menu-item" id="drinkMenu">
        <button onclick="addMenuItem('drinkMenu', 'drink')">增加饮料选项</button>
    </div>
    
    <button onclick="submitOrder()">提交订单</button>
    
    <script>
        // 模拟菜单数据
        const menuData = {
            mainDish: [
                { id: "mainDish1", name: "主菜1", price: 15 },
                { id: "mainDish2", name: "主菜2", price: 18 },
                // 其他主菜数据
            ],
            sideDish: [
                { id: "sideDish1", name: "配菜1", price: 8 },
                { id: "sideDish2", name: "配菜2", price: 10 },
                // 其他配菜数据
            ],
            drink: [
                { id: "drink1", name: "饮料1", price: 5 },
                { id: "drink2", name: "饮料2", price: 6 },
                // 其他饮料数据
            ]
        };
        
        // 动态加载菜单
        function loadMenuItems(category, containerId) {
            const container = document.getElementById(containerId);
            menuData[category].forEach(item => {
                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.id = item.id;
                checkbox.value = item.price;
                const label = document.createElement("label");
                label.htmlFor = item.id;
                label.appendChild(document.createTextNode(item.name + " - " + item.price + "元"));
                const qtyInput = document.createElement("input");
                qtyInput.type = "number";
                qtyInput.id = item.id + "Qty";
                qtyInput.min = 0;
                qtyInput.value = 0;
                container.appendChild(checkbox);
                container.appendChild(label);
                container.appendChild(qtyInput);
                container.appendChild(document.createElement("br"));
            });
        }
        
        // 增加菜品选项
        function addMenuItem(containerId, category) {
            const container = document.getElementById(containerId);
            const newItemId = category + (container.children.length / 4 + 1); // 4是每个菜品选项的元素数量
            const newItemIndex = container.children.length / 4 % menuData[category].length; // 循环选择菜品数据
            const newItem = menuData[category][newItemIndex];
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = newItemId;
            checkbox.value = newItem.price;
            const label = document.createElement("label");
            label.htmlFor = newItemId;
            label.appendChild(document.createTextNode(newItem.name + " - " + newItem.price + "元"));
            const qtyInput = document.createElement("input");
            qtyInput.type = "number";
            qtyInput.id = newItemId + "Qty";
            qtyInput.min = 0;
            qtyInput.value = 0;
            container.appendChild(checkbox);
            container.appendChild(label);
            container.appendChild(qtyInput);
            container.appendChild(document.createElement("br"));
        }
        
        loadMenuItems("mainDish", "mainDishMenu");
        loadMenuItems("sideDish", "sideDishMenu");
        loadMenuItems("drink", "drinkMenu");
        
        // 提交订单
        function submitOrder() {
            const order = {
                items: [],
                total: 0
            };
            
            calculateOrder("mainDish", order);
            calculateOrder("sideDish", order);
            calculateOrder("drink", order);
            
            alert("订单总价为：" + order.total + "元");
            // 这里可以将订单数据提交到后端服务器进行处理
        }
        
        // 计算订单总价
        function calculateOrder(category, order) {
            menuData[category].forEach(item => {
                const checkbox = document.getElementById(item.id);
                const qtyInput = document.getElementById(item.id + "Qty");
                if (checkbox.checked && parseInt(qtyInput.value) > 0) {
                    const itemTotal = parseInt(checkbox.value) * parseInt(qtyInput.value);
                    order.items.push({ name: item.name, quantity: parseInt(qtyInput.value), price: itemTotal });
                    order.total += itemTotal;
                }
            });
        }
    </script>
</body>
</html>